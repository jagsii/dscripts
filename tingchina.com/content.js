exports=async function(a,b,c,d){const{send:e}=require("http"),f={...(d&&d.clientOptions),encoding:"gbk","x-mobile":0};stat("request");let g=await e(a,f);stat("request"),assertOK(g);let h=g.body;if(-1===h.indexOf("var fileUrl=")){const b=h.subRegex(/url\[3\]= "([^"]+)"/);g=await e({url:"https://www.tingchina.com/play/h5.asp",headers:{Referer:a}},f),assertOK(g),h=g.body;const{pre:c,suf:d}=h.subRegexMap(/window\.parent\.urlDef="(?<pre>[^"]+)";[\S\s]*window\.parent\.url\[3\] \+ "(?<suf>[^"]+)"/);return {url:`${c}${b}${d}`}}else {let b,c=h.subRegex(/var fileUrl= "([^"]+)";/),d=3;for(;0<d--&&(g=await e({url:`https://img.tingchina.com/play/h5_jsonp.asp?0.${new Date().getTime()}`,headers:{Referer:a}},f),assertOK(g),h=g.body,b=h.subRegex(/"\?key=([a-f0-9_]+)";/),null==b););return null==b?{error:"\u8F6C\u7801\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}:{url:`https://t3344.tingchina.com${c}?key=${b}`}}};