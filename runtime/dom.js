const handle=require("html/dom"),_isProxiedRegex=/^@@id\[\d+](list|map)?$/,_isNumRegex=/^[0-9]+$/;function _isProxied(a){return "string"==typeof a&&_isProxiedRegex.test(a)}function _wrap(a){return _isProxied(a)?ProxyObject(a):a}function ProxyObject(a){const b={_id:a,isDartObj:!0,_type:a.substring(a.indexOf("]")+1)};return new Proxy(b,_handler)}const domGetters=["length","childElementCount","children","firstElementChild","lastElementChild","childNodes","firstChild","lastChild","nextSibling","nodeName","nodeType","parentElement","parentNode","previousSibling","textContent","nextElementSibling","previousElementSibling","documentElement","head","body","outerHTML","innerHTML","attributes","classList","className","id","localName","namespaceURI","tagName","data"],domFunctions=["parse","parseFragment","indexOf","querySelector","querySelectorAll","contains","hasChildNodes","elementAt","item","namedItem","getElementById","closest","getAttribute","getAttributeNames","getElementsByClassName","getElementsByTagName","hasAttribute","hasAttributes","matches"],_handler={get:function(a,b){if("_id"===b)return a._id;if("isDartObj"===b)return !0;if("list"===a._type&&_isNumRegex.test(b)){const c=handle("[]",a._id,parseInt(b));return _wrap(c)}if(-1!==domGetters.indexOf(b)){const c=handle(b,a._id);return _wrap(c)}if(-1!==domFunctions.indexOf(b))return function(){const c=[b,a._id];for(let a=0;a<arguments.length;a++)arguments[a].isDartObj?c.push(arguments[a]._id):c.push(arguments[a]);const d=handle.apply(null,c);return _wrap(d)};throw "Unknown accessor: "+b}};function parse(a){const b=handle("parse",a);return b?_wrap(b):null}function parseFragment(a){const b=handle("parseFragment",a);return b?_wrap(b):null}exports.parse=parse,exports.parseFragment=parseFragment;