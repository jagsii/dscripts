exports=async function(url,bid,cid,options){const clientOptions={...(options&&options.clientOptions),encoding:"utf-8","x-mobile":0},{send}=require("http"),URL=require("url"),uri=new URL(url);let response=await send(url,clientOptions);assertOK(response);let html=response.body;const player_aaaa=JSON.parse(html.subRegex(/var player_aaaa\s*=\s*({.+?});?\s*<\/script>/));if("down"===player_aaaa.flag)return null;const maccms=JSON.parse(html.subRegex(/var maccms\s*=\s*(.+?);?\s*<\/script/));"1"==player_aaaa.encrypt?player_aaaa.url=unescape(player_aaaa.url):"2"==player_aaaa.encrypt&&(player_aaaa.url=unescape(atob(player_aaaa.url)));let playFrom=player_aaaa.from;const path=uri.resolve(maccms.path+"/static/player/");let videoUrl;response=await send({url:path+playFrom+".js",headers:{Referer:url}},clientOptions),assertOK(response),html=response.body;const _u=html.subRegex(/<iframe [^>]*src="([^"]+url=)/);if(!_u)return null;const url3=uri.resolve(_u+player_aaaa.url);response=await send({url:url3,headers:{Referer:url}},clientOptions),assertOK(response),html=response.body;const _0x2a7c44=html.subRegex(/"url":\s*"([^"]+)"/),_0x2bdb6e=html.subRegex(/<meta [^>]*name="viewport"[^>]*id="([^"]*)"/).replace("now_",""),_0x56059b=html.subRegex(/<meta [^>]*charset="UTF-8"[^>]*id="([^"]*)"/).replace("now_","");let _0x3bf712,_0x3c6961=[],_0x32b87e="";for(let _0x9d246b=0;_0x9d246b<_0x56059b.length;_0x9d246b++)_0x3c6961.push({id:_0x56059b[_0x9d246b],text:_0x2bdb6e[_0x9d246b]});_0x3bf712=((_0x3bbe2f,_0x15b895,_0xd15181)=>_0x15b895.sort(({[_0x3bbe2f]:_0x18dab3},{[_0x3bbe2f]:_0x57d4cf})=>_0xd15181(_0x18dab3,_0x57d4cf)))("id",_0x3c6961,(_0x4335ef,_0x5bc758)=>_0x4335ef-_0x5bc758);for(let _0x9d246b=0;_0x9d246b<_0x3bf712.length;_0x9d246b++)_0x32b87e+=_0x3bf712[_0x9d246b].text;const CryptoJS=(await require("third-party/crypto-js"))(["md5","aes"]);let _0x598e60=CryptoJS.MD5(_0x32b87e+"YXS@v.dToI0478Y").toString(),_0x38c7ec=CryptoJS.enc.Utf8.parse(_0x598e60.substring(16)),_0x5b99c8=CryptoJS.enc.Utf8.parse(_0x598e60.substring(0,16)),_0x5dafd1=CryptoJS.AES.decrypt(_0x2a7c44,_0x38c7ec,{iv:_0x5b99c8,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7});if(videoUrl=_0x5dafd1.toString(CryptoJS.enc.Utf8),videoUrl)return {url:videoUrl}};