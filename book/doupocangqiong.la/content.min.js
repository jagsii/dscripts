exports=async function(url,bid,cid,options){const{collectLines}=await require("transcode/parse_content"),{send}=require("http"),absoluteUrl=require("utils/absolute_url");let response=await send(url,options?.clientOptions);assertOK(response);const html=response.body,args=html.subRegexMap(/\$\.post\(['"](?<u>[^'"]+)['"],\s*{\s*siteid:\s*'(?<s>[^'"]+)',\s*bid:\s*['"](?<b>[^'"]+)['"],\s*cid:\s*['"](?<c>[^'"]+)['"]\s*}/);if(!args.u)return null;response=await send({url:absoluteUrl(args.u,url),method:"POST",body:`siteid=${args.s}&bid=${args.b}&cid=${args.c}`,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-Requested-With":"XMLHttpRequest",Referer:url}}),assertOK(response);const result=[],json=JSON.parse(response.body);return collectLines(json.info,result),formatBookContent(result)};