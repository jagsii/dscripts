exports=async function(bid,options){const{parseCatalog,cleanCatalogWrapper,hrefRecordRegex}=await require("transcode/parse_catalog"),base="https://www.wz-fyuan.com",clientOptions={...(options&&options.clientOptions),encoding:"gbk"};return parseCatalog(`${base}/book/${bid}.html`,{cleaner:html=>cleanCatalogWrapper(html,/class="book-chapter-list"/,/<\/ul>\s*<\/div>/),recordRegex:hrefRecordRegex},{clientOptions}).then(async _=>{if(0<_.length){const html=await getHtml(_.first.url,clientOptions),bookid=html.subRegex(/bookid\s*=\s*(\d+);/);if(bookid){const idPrefix=bookid.idPrefix();for(let c of _)c.url=`${c.url}#url=${base}/files/article/html555/${idPrefix}/${bookid}/${c.id}.html`;}}return _})};