exports=async function(url,bid,cid,options){const{parseContent,trimContentFragment}=await require("transcode/parse_content"),replaceFont=await require("transcode/pinyin_map");let nextChapter;return parseContent(url,{cleaner:html=>trimContentFragment(html,/class="content"[^>]*>/)},{clientOptions:{...(options&&options.clientOptions),encoding:"gbk","x-mobile":1},preprocess:html=>{html=replaceFont(html,/<img src="[a-z]+\/([^"]+)\.jpg">/g);const nextUrl=html.subRegex(/href=['"]([^'"]+)['"]>\s*下一章\s*</);if(nextUrl){const nextId=nextUrl.subRegex(/heiyexs\.asp\?id=(\d+)/);if(nextId){const absoluteUrl=require("utils/absolute_url");nextChapter={id:nextId,name:"",url:absoluteUrl(nextUrl,url)};}}return html},transformer:f=>f.replace(/&#8238;((?:[^&]|&[^#]+)+)&#8236;/g,(s,m)=>m.split("").reverse().join(""))}).then(_=>nextChapter?{content:_,nextChapter}:_)};