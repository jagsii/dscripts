exports=async function(bid,options){const{parseCatalog,cleanCatalogWrapper,reorderVerticalDoubleGroup}=await require("transcode/parse_catalog"),replaceFont=await require("transcode/pinyin_map");return parseCatalog(`http://www.heiyexs.com/heiye.asp?id=${bid}`,{cleaner:html=>cleanCatalogWrapper(html,/class="mread2"/,"</table>"),recordRegex:/href="(?<url>[^"]+)"[^>]*>(?<name>[^<]+)<|class="(?:bai|du)"[^>]*>(?<hidden>[^<]+)</g},{clientOptions:{...(options&&options.clientOptions),encoding:"gbk"},idRegex:/\?id=(?<id>\d+)/,preprocess:html=>replaceFont(html,/<img src="[a-z]+\/([^"]+)\.jpg">/g),transformer:f=>f.replace(/&#8238;((?:[^&]|&[^#]+)+)&#8236;/g,(s,m)=>m.split("").reverse().join(""))}).then(_=>{for(let i=_.length-5;i<_.length;i++)if(0===_[i].name.length){_.splice(i,_.length-i);break}return reorderVerticalDoubleGroup(_,4)})};