exports=async function(url,bid,cid,options){const{parseContentPaginate,getXiaYiYeElement}=await require("transcode/parse_content");let prevChapter,nextChapter;return parseContentPaginate(page=>1===page?url:url.replace(".html",`_${page}.html`),"div#content",{clientOptions:{...(options&&options.clientOptions)},hasNextFn:html=>null!=/\/\d+_\d+\.html/.exec(getXiaYiYeElement(html)),preprocess:html=>{let prevUrl=html.subRegex(/href="([^"]*\/xs_\d+\/\d+\.html)"[^>]*>上一章</),nextUrl=html.subRegex(/href="([^"]*\/xs_\d+\/\d+\.html)"[^>]*>下一章</);const URL=require("url"),uri=new URL(url);return prevUrl&&(prevChapter={id:prevUrl.subRegex(/(\d+)\.html/),name:"",url:uri.resolve(prevUrl)}),nextUrl&&(nextChapter={id:nextUrl.subRegex(/(\d+)\.html/),name:"",url:uri.resolve(nextUrl)}),html}}).then(_=>prevChapter||nextChapter?{prevChapter,nextChapter,content:_}:_)};