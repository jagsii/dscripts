exports=async function(url,bid,cid,options){const{parseContentPaginate,trimBeforeContent,getXiaYiYeElement,googleAdPattern}=await require("transcode/parse_content"),webviewFetch=require("webview_fetch"),cc=await webviewFetch(url,{fetchCookies:!0});return parseContentPaginate(page=>1===page?url:url.replace(".html",`-${page}.html`),{cleaner:html=>trimBeforeContent(html,/[dD][iI][vV] id="[^"]+"[^>]*>\s*<p>/)+"<p>"},{clientOptions:{...(options&&options.clientOptions),encoding:"gbk",followCookies:!0},httpOptions:{headers:{cookie:cc}},hasNextFn:html=>null!=/\d+-\d+\.html/.exec(getXiaYiYeElement(html)),preprocess:html=>html.replace(googleAdPattern,""),transformer:f=>f.replace(/(…。。<br\s*\/?>[^<]+|。。)([\s　]*<\/p>)?[\s　]*$/,"").replace(/<br\s*\/?>\s*[　\s]*本章未完，请点击下一页继续阅读！/,""),merger:null}).then(_=>(0<_.length&&(_.last=_.last.replace(/.+提醒您：看完记得收藏.+/,""),0===_.last.length&&_.pop()),_))};