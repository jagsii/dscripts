exports=async function(bid,options){const{send}=require("http"),URL=require("url"),url=`https://www.xiashuyun.com/${bid}/`,clientOptions={encoding:"utf-8",...options.clientOptions};let response=await send(url,clientOptions);assertOK(response);let html=response.body;const loadMoreArgs=html.subRegexMap(/onClick="loadzj\((?<bid>\d+),(?<num>\d+),'(?<order>[^']*)'\)/),uri=new URL(url);response=await send({url:uri.resolve(`/api/ajax/zj?id=${loadMoreArgs.bid}&num=${loadMoreArgs.num}&order=${loadMoreArgs.order}`),headers:{Referer:url}},clientOptions),assertOK(response);const moreHtml=response.body,leadingPos=html.indexOf("<ul id=\"toplist\">"),leadingEndPos=html.indexOf("</ul>",leadingPos),leadingHtml=html.substring(leadingPos,leadingEndPos),trailingPos=html.indexOf("<ul id=\"lastchapter\">")+21,trailingEndPos=html.indexOf("</ul>",trailingPos),trailingHtml=html.substring(trailingPos,trailingEndPos),matches=(leadingHtml+moreHtml+trailingHtml).matchAll(/href="(?<url>[^"]+)"[^>]*>(?<name>[^<]+)</g),catalog=[];for(let match of matches){const chapterUrl=match.groups.url,cid=/(?<id>\d+)\.html/.exec(chapterUrl).groups.id,record={id:cid,name:match.groups.name,url:uri.resolve(chapterUrl)};catalog.push(record);}return formatCatalog(catalog)};