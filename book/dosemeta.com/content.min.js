exports=async function(url,bid,cid,options){const{parseContentPaginate,trimContentFragment,getLinkElement}=await require("transcode/parse_content");let prevChapter,nextChapter;return parseContentPaginate(page=>1===page?url:url.replace(".html",`_${page}.html`),{cleaner:html=>trimContentFragment(html,/id="article"[^>]*>/,"article")},{clientOptions:{...(options&&options.clientOptions)},hasNextFn:html=>null!=/\/\d+_\d+\.html/.exec(getLinkElement(html,"id=\"next_url\"")),merger:null,preprocess:h=>{const regex=/href="([^"]+)"/,prevUrl=getLinkElement(h,"id=\"prev_url\"")?.subRegex(regex),nextUrl=getLinkElement(h,"id=\"next_url\"")?.subRegex(regex),idRegex=/\/(\d+)\.html/,prevId=prevUrl?.subRegex(idRegex),nextId=nextUrl?.subRegex(idRegex),URL=require("url"),uri=new URL(url);return prevId&&prevId!==cid&&(prevChapter={id:prevId,name:"",url:uri.resolve(prevUrl)}),nextId&&(nextChapter={id:nextId,name:"",url:uri.resolve(nextUrl)}),h}}).then(_=>null!=prevChapter||null!=nextChapter?{content:_,prevChapter,nextChapter}:_)};