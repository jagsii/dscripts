exports=async function(url,bid,cid,options){const{parseContent}=await require("transcode/parse_content"),replacePinYin=await require("transcode/pinyin_map");let nextChapter;return parseContent(url,"div.content",{clientOptions:{...(options&&options.clientOptions),encoding:"gbk"},preprocess:html=>{const nextUrl=html.subRegex(/href=['"]([^'"]+)['"][^>]*>下一章<\/a>/);if(nextUrl){const absoluteUrl=require("utils/absolute_url"),nextId=nextUrl.subRegex(/id=(\d+)/);nextChapter={id:nextId,name:"",url:absoluteUrl(nextUrl,url)};}return replacePinYin(html,/<img src="iqy\/(\w+)\.jpg">/g).replace(/&#8238;([^&]+)&#8236;/g,(s,m)=>m.split("").reverse().join(""))}}).then(_=>nextChapter?{content:_,nextChapter}:_)};