exports=async function(url,bid,cid,options){const{parseContentPaginate,trimContentFragment}=await require("transcode/parse_content"),fontMap={e800:"\u7684",e809:"\u6709",e863:"\u5507",e80a:"\u8FD9",e80b:"\u4E2A",e80c:"\u4E0A",e80d:"\u4EEC",e80e:"\u6765",e80f:"\u5230",e810:"\u65F6",e811:"\u5927",e812:"\u5730",e801:"\u4E00",e813:"\u4E3A",e814:"\u5B50",e815:"\u4E2D",e816:"\u4F60",e817:"\u8BF4",e818:"\u751F",e819:"\u56FD",e81a:"\u5E74",e81b:"\u7740",e81c:"\u5C31",e802:"\u662F",e81d:"\u90A3",e81e:"\u548C",e81f:"\u8981",e820:"\u5979",e821:"\u51FA",e822:"\u4E5F",e823:"\u5F97",e824:"\u91CC",e825:"\u540E",e826:"\u81EA",e803:"\u4E86",e827:"\u4EE5",e828:"\u4F1A",e829:"\u5BB6",e82a:"\u53EF",e82b:"\u4E0B",e82c:"\u800C",e82d:"\u8FC7",e82e:"\u5929",e82f:"\u53BB",e830:"\u80FD",e804:"\u6211",e831:"\u5BF9",e832:"\u5C0F",e833:"\u591A",e834:"\u7136",e835:"\u4E8E",e836:"\u5FC3",e837:"\u5B66",e838:"\u4E48",e839:"\u4E4B",e83a:"\u90FD",e805:"\u4E0D",e83b:"\u597D",e83c:"\u770B",e83d:"\u8D77",e83e:"\u53D1",e83f:"\u5F53",e840:"\u6CA1",e841:"\u6210",e842:"\u53EA",e843:"\u5982",e844:"\u4E8B",e806:"\u4EBA",e845:"\u628A",e846:"\u8FD8",e847:"\u7528",e848:"\u7B2C",e849:"\u6837",e84a:"\u9053",e84b:"\u60F3",e84c:"\u4F5C",e84d:"\u79CD",e84e:"\u5F00",e807:"\u5728",e84f:"\u7F8E",e850:"\u4E73",e851:"\u9634",e852:"\u6DB2",e853:"\u830E",e854:"\u6B32",e855:"\u547B",e856:"\u8089",e857:"\u4EA4",e858:"\u6027",e808:"\u4ED6",e859:"\u80F8",e85a:"\u79C1",e85b:"\u7A74",e85c:"\u6DEB",e85d:"\u81C0",e85e:"\u8214",e85f:"\u5C04",e860:"\u8131",e861:"\u88F8",e862:"\u9A9A"};return parseContentPaginate(page=>1===page?url:url.replace(".html",`_${page}.html`),{cleaner:html=>trimContentFragment(html,/id="TextContent"[^>]*>/)},{clientOptions:{...(options&&options.clientOptions)},preprocess:html=>html.replace(/<span class="notetext" data-note="([^"]+)"><\/span>/g,(_,m)=>`（${m}）`),transformer:fragment=>fragment.replace(/([\uE800-\uE862])/g,(_,m)=>fontMap[m.charCodeAt(0).toString(16)]).replace(/<p[^>]*>（本章未完）<\/p>/,""),hasNextFn:html=>/nextpage\s*=\s*['"]\/book\/\d+\/\d+_\d+\.html['"]/.test(html)})};