exports=async function(c,d,e,f){const{parseContent:g,trimBeforeContent:h}=await require("transcode/parse_content"),i={...(f&&f.clientOptions)};return g(c,null,{clientOptions:i,parser:async f=>{let g=f.substring(f.indexOf("id=\"content\""));g=g.substring(0,g.indexOf("</div></div>")),g=g.substring(g.lastIndexOf("</h2>")+5);const h=g.substring(g.indexOf("<div>")+5).split("</div><div>").map(a=>a.replace(/<\w+>[^<]*<\/\w+>/g,"").trim()),{send:j}=require("http");let k=await j({url:`https://www.hetushu.com/book/${d}/r${e}.json`,headers:{referer:c,"x-requested-with":"XMLHttpRequest"}},i);assertOK(k);const l=k.headers.token,m=require("crypto/base64/decode"),n=require("crypto/decode"),o=n(m(l),"utf-8").split(/[A-Z]+%/).map(a=>parseInt(a));let a=0;const p=[];for(let b=0;b<o.length;b++)5>o[b]?(p[o[b]]=h[b],a++):p[o[b]-a]=h[b];return p.filter(a=>0<a.length)}})};