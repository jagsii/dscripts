exports=async function(url,bid,cid,options){const{parseContentPaginate}=await require("transcode/parse_content"),replaceFont=await require("transcode/font_map"),rpfrom=["\u745F","\u5E78","\u94F6","\u56E0","\u7ECF","\u4E43","\u673A","\u5427","\u7EAF","\u5F1F","\u67D4","\u699C","\u8840","\u8349","\u6C5D","\u5C6F","\u5251","\u5DEE","\u517B","\u5E08","\u601D","\u693F","\u66F9","\u9CC3","\u4F34","\u5E94","\u8DDF","\u6674","\u5F53","\u9312","\u5C4B","\u521B","\u535A","\u65E7","\u6444","\u7ECF","\u8DE8","\u521D","\u9F0E","\u4E48","\u897F","\u76AE","\u6F14","\u53F6","\u5F52","\u8146","\u68A2","\u51E4","\u5F55","\u5E02","\u4E11","\u6768","\u5DEE","\u7F57","\u9224","\u4FC0","\u9080","\u9CD5","\u971C","\u6C79","\u9177","\u5E09","\u6041","\u6262","\u907F","\u6673","\u4FCF","\u52B3","\u5C14","\u6C57","\u73E0","\u675F","\u7F1A","\u67AB","\u9CD7","\u795E","\u9690"],rpto=["\u8272","\u6027","\u6DEB","\u9634","\u830E","\u5976","\u9E21","\u5DF4","\u5507","\u8482","\u8089","\u68D2","\u7A74","\u64CD","\u4E73","\u81C0","\u8D31","\u64E6","\u75D2","\u6E7F","\u79C1","\u6625","\u6F6E","\u585E","\u74E3","\u786C","\u6839","\u60C5","\u88C6","\u554A","\u5514","\u5E8A","\u52C3","\u7A76","\u5C04","\u7CBE","\u80EF","\u7C97","\u9876","\u6478","\u7FD5","\u5C41","\u773C","\u6DB2","\u9F9F","\u8214","\u6414","\u7F1D","\u64B8","\u8210","\u62BD","\u9633","\u63D2","\u88F8","\u65E5","\u817F","\u8170","\u96EA","\u723D","\u80F8","\u88E4","\u7C89","\u5AE9","\u80A1","\u542E","\u5438","\u7FD8","\u8001","\u4E8C","\u542B","\u4F4F","\u8212","\u670D","\u4E30","\u6EE1","\u547B","\u541F"];return parseContentPaginate(page=>1===page?url:url.replace(".html",`_${page}.html`),null,{clientOptions:{...(options&&options.clientOptions)},hasNextFn:html=>null!=/href="\/xs\/\d+\/\d+_\d+\.html">下一页/.exec(html),parser:html=>{const content1=html.substring(html.indexOf("id=\"content\"")).subIndexOf(">").toIndexOf("</div>"),arrrp=JSON.parse(html.subRegex(/arrrp\s*=\s*(\[[^\]]+])/).replace(/'/g,"\""));let index=0;const content=[];for(let c,k=0;k<content1.length;k++)c=content1[k],-1!==rpfrom.indexOf(c)||-1!==rpto.indexOf(c)?(""==arrrp[index]?content.push(c):content.push(rpto[parseInt(arrrp[index])]),index++):content.push(c);const $chapter=replaceFont(content.join(""),/<i>&#x([a-f\d]{4})<\/i>/g).replace(new RegExp(/\[.*?\]/),""),arrays=atob(html.subRegex(/_ii_rr\(['"]([^'"]+)['"]\)/)).split(","),datas=$chapter.split("<br><br>"),result=[],el=parseInt(arrays[0]),len=datas.length;for(let i=1;i<=len;i++)result.push(datas[parseInt(arrays[i])-el]);return result}})};