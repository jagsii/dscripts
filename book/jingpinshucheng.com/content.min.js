exports=async function(url,bid,cid,options){const{parseContent,trimContentFragment,extractFragment,collectLines}=await require("transcode/parse_content");return parseContent(url,null,{clientOptions:{...(options&&options.clientOptions)},parser:async html=>{let fragment=await extractFragment(html,{cleaner:html=>trimContentFragment(html,/id="content"[^>]*>/)});const args=html.subRegexMap(/onclick="load_more\('(?<b>\d+)','(?<c>\d+)'\)"/);if(args.b){const{send}=require("http"),absoluteUrl=require("utils/absolute_url"),callback=html.subRegex(/callback\s*=\s*['"]([^'"\s+]+)['"]/),response=await send({url:absoluteUrl(`/index.php?c=book&a=content.jsonp&callback=${callback}&book_id=${args.b}&id=${args.c}&b=${function(_str){for(var _Mathtrunc=Math.trunc,staticchars="PXhw7UT1B0a9kQDKZsjIASmOezxYG4CHo5Jyfg2b8FLpEvRr3WtVnlqMidu6cN",encodechars="",i=0;i<_str.length;i++){var num0=staticchars.indexOf(_str[i]),code=-1==num0?_str[i]:staticchars[(num0+3)%62],num1=_Mathtrunc(62*Math.random()),num2=_Mathtrunc(62*Math.random());encodechars+=staticchars[num1]+code+staticchars[num2];}return encodechars}(callback)}`,url),headers:{referer:url}});assertOK(response);const h=response.body,json=JSON.parse(h.substring(h.indexOf("{"),h.lastIndexOf("}")+1));fragment+=json.content.replace(/<!--[^>]+-->/g,"");}const result=[];return collectLines(fragment,result),result}})};