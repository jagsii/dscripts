exports=async function(a,b,c,d){const{collectLines:e}=await require("transcode/parse_content"),f=require("utils/absolute_url"),{send:g}=require("http");let h=await g(a,d?.clientOptions);assertOK(h);let i=h.body;const j=i.subRegex(/hash ?= ?"(?<hash>[^"]+)"/);if(!j)return null;h=await g({url:f("/home/index/ajaxchapter",a),method:"POST",body:"id="+b+"&eKey="+j+"&cid="+c+"&basecid="+c,headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8","x-requested-with":"XMLHttpRequest",referer:a}}),assertOK(h),i=h.body;const k=JSON.parse(i);if(k.info&&k.info.content){const a=[];if(e(k.info.content,a),4<a.length)for(let b=a.length-1;0<b;b--)if(!/请大家收藏新地址|请下载.+最新(?:内容|章节)|为你提供.+更新.+\w+\.\w+/.test(a[b])){b<a.length-1&&a.splice(b+1,a.length-b-1);break}return formatBookContent(a)}return null};