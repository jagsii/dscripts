exports=async function(bid,options){const{parseCatalog,cleanCatalogWrapper}=await require("transcode/parse_catalog"),url=`https://www.qb5.io/xs-${bid}/`;return parseCatalog(url,{cleaner:html=>cleanCatalogWrapper(html,/<ul [^>]*class="list"[^>]*>/,"class=\"footer\"").toLastIndexOf("</ul>"),recordRegex:/href=['"](?<url>[^'"]+)['"][^>]*>(?:\s*<span>)?(?<name>[^<]+)</g},{clientOptions:{...(options&&options.clientOptions)},preprocess:async h=>{var _Mathtrunc=Math.trunc;const p=h.indexOf(" onclick=\"load_more(");if(-1!==p){const staticchars=h.subRegex(/var staticchars=['"]([^'"]+)['"]/),callback=h.subRegex(/var callback=['"]([^'"]+)['"]/),_str=callback;for(var num0,encodechars="",i=0;i<_str.length;i++){num0=staticchars.indexOf(_str[i]);let code=-1==num0?_str[i]:staticchars[(num0+3)%62];var num1=_Mathtrunc(62*Math.random()),num2=_Mathtrunc(62*Math.random());encodechars+=staticchars[num1]+code+staticchars[num2];}const html=await getHtml({url:`https://www.qb5.io/?c=xs&a=list.json&callback=${callback}&book_id=${bid}&b=${encodechars}`,headers:{referer:url}},options?.clientOptions),json=html.substring(html.indexOf("(")+1,html.lastIndexOf(")"));h=h.substring(0,p)+JSON.parse(json).content+h.substring(p);}return h}})};