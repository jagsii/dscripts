exports=async function(bid,options){const{send}=require("http"),URL=require("url"),url=`http://www.mhxqiu2.com/${bid}/`;let response=await send(url,options?.clientOptions);assertOK(response);const html=response.body;let fragment=html.substring(html.indexOf("id=\"mh-chapter-list-ol-"));fragment=fragment.substring(0,fragment.indexOf("</ul>"));const uri=new URL(url),result=[];for(let _ of fragment.subRegexMapAll(/href="(?<url>[^"]+)">(?:<p>)?(?<name>[^<]+)</g)){const id=_.url.subRegex(/(\d+)\.html/);id&&result.push({id,name:_.name,url:uri.resolve(_.url)});}const{id,id2}=html.subRegexMap(/data-id="(?<id>\d+)" data-vid="(?<id2>\d+)"/);if(id&&id2){response=await send({url:uri.resolve("/bookchapter/"),method:"POST",body:`id=${id}&id2=${id2}`,headers:{Referer:url,"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}},options.clientOptions),assertOK(response);const json=response.body;if(json)for(let _ of JSON.parse(json))result.push({id:_.chapterid+"",name:_.chaptername,url:uri.resolve(`/${bid}/${_.chapterid}.html`)});}return formatCatalog(result.reverse())};