exports=async function(url,bid,cid,options){const{send}=require("http"),clientOptions={...(options&&options.clientOptions),encoding:"utf-8","x-mobile":0};stat("request");let response=await send(url.replace("//m.","//www."),clientOptions);stat("request");let html;503===response.statusCode&&response.headers["set-cookie"]?html=await require("webview_fetch")(url,{mobile:1===clientOptions["x-mobile"]}):(assertOK(response),html=response.body);const{chapterImages,chapterPath}=html.subRegexMap(/var chapterImages = (?<chapterImages>\[[^\]]+\]);var chapterPath\s*=\s*"(?<chapterPath>[^"]*)";/),images=JSON.parse(chapterImages),host="https://res.manhua39.com",urls=images.map(_=>void 0===_?host+"/images/default/common.png":_.match(/^https?:\/\/(images.dmzj.com|imgsmall.dmzj.com)/i)?host+"/showImage.php?url="+encodeURI(_):_.match(/^[a-z]\//i)?host+"/showImage.php?url="+encodeURI("https://images.dmzj.com/"+_):_.match(/^(http:|https:|ftp:|^)\/\//i)?_:_.match(/^(\/|images?)/i)?host+"/"+_.replace(/^\//,""):host+"/"+(chapterPath.replace(/\/$/,"")+"/"+_.ltrim("/")).replace(/^\//,""));return {urls}};