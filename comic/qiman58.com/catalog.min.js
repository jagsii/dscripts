exports=async function(a,b){const{send:c}=require("http"),d=require("url"),{cleanCatalogWrapper:e}=await require("transcode/parse_catalog"),f=`http://www.qiman58.com/${a}/`,g={...(b&&b.clientOptions)};let h=await c(f,g);assertOK(h);let i=h.body,j=e(i,/id="chapter-list1">/,"</div>");const k=j.matchAll(/href="(?<url>[^"]+)"[^>]*>(?<name>[^<]+)</g),l=new d(f),m=[];for(let c of k){const a=c.groups.url,b=/(?<id>\d+)\.html/.exec(a).groups.id,d={id:b,name:c.groups.name,url:l.resolve(a)};m.push(d);}return -1!==i.indexOf("class=\"moreChapter\" onclick")&&(h=await c({url:l.resolve("/bookchapter/"),method:"POST",body:`id=${a}&id2=1`,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",Referer:f,"X-Requested-With":"XMLHttpRequest"}},g),assertOK(h),JSON.parse(h.body).forEach(b=>{m.push({id:b.chapterid,name:b.chaptername,url:l.resolve(`/${a}/${b.chapterid}.html`)});})),m.reverse()};