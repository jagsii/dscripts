exports=async function(url,bid,cid,options){const{send}=require("http"),clientOptions={...(options&&options.clientOptions)};let response=await send(url,clientOptions);assertOK(response);let html=response.body,{chapterImages,chapterPath}=html.subRegexMap(/var chapterImages\s*=\s*(?<chapterImages>\[[^\]]+\]);var chapterPath\s*=\s*"(?<chapterPath>[^"]*)"/);chapterPath=chapterPath.replace(/^\/|\/$/g,"");const host="https://res20.wuxiamh.com",urls=JSON.parse(chapterImages.replace(/\\/g,"")).map(filename=>filename.match(/^https?:\/\/(images.dmzj.com|imgsmall.dmzj.com)/i)?host+"/showImage.php?url="+encodeURI(filename):filename.match(/^[a-z]\//i)?host+"/showImage.php?url="+encodeURI("https://images.dmzj.com/"+filename):filename.match(/^(http:|https:|ftp:|^)\/\//i)?filename:filename.match(/^(\/|images?)/i)?host+"/"+filename.replace(/^\//,""):(filename=chapterPath+"/"+filename.replace(/^\//,""),host+"/"+filename.replace(/^\//,"")));return {urls}};