function e(e,t){var a=document.createElement(e);return(t||document.body).appendChild(a),a}globalThis.defaultIcon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAixJREFUWEetl4FRwzAMRdVN6CTQSYBJgEmASSiT0E3gXi6/96vasZrgu17axpa+/5cleRe3jbuIeIyIh4jgO5/TbIInn8+IOFbN7goT5fS1MFdTAPIxgxHA5vIRgJeIuMVxdiIgbz3wPQDs+n2m2tfK4PdMN78lBc97kyevO5hc53ctABj6SYhx9FzU9rezW2xcgcgAcP4170p2kKBLYXL2NDPXY/wKRAaAcyJcA8TViO7J1oqLvf50ADngqs7zKZFUWUYHwglhXjgA146XTKoMghXqGTIMi7A5lEIA3AiUs/vqcNmgFp3dXs/OBFYAfPdV6mXYTw3MAWBp91rHvD0AcuSOklNrR2sT1gFnLQ2r9Gve6Ph1ZQCAa3hL8LUkuBX4EQAcF3RkKIiqhqpnv3saAOABWNV/LeUZyGktAGetylZz3kgCopukQm7weuBxo4rYcsA63quBaTLgxkgOlFoW4lwZjoWeH3RylHZbpduLmGJFsabnFITVM6ySrESDEcVMlmSpgl4cewyM8nZPY0/ZCuRKGr/IugBoNSDZqagGLF0P0qg74j/FyaiGXGXdVjFq7dgTVA9wJYm5VBfFqMICO4biXkSPAORYm5KeJ56tyWVJ/2z7HKQOYGtaRTpozf2j+kxJewG00pRuyXQ5SU09gBvsteW5M94CwhuQq9Z+6WLynyC68bFU/dbcCVtMLd4rKuV3DZDhnVBIKwC88xEYvw/69RyqVcxKcfMHgLGb+ey0wXwAAAAASUVORK5CYII=",e("style",document.head).textContent="*{box-sizing:border-box}body{margin:0;padding:0;color:#4d5156;background:#f1f3f4}a{-webkit-tap-highlight-color:rgba(0,0,0,0.1)}body.night{color:#e1e1e1;background-color:#202124}body.night .engines,body.night .search-container,body.night .site-item,body.night .site-item-list,body.night .tabbar{background-color:#32373b}body.night .site-item .link,body.night .site-item .title{color:#999}body.night .site-item .description{color:#c1c1c1}.site-item,.site-item-list{display:block;text-decoration:none;padding:12px 16px 6px 16px;margin-bottom:8px;background-color:#fff}.site-item-list a{text-decoration:none;display:inline-block;padding:.5em .5em;font-size:16px;color:#1558d6;white-space:normal;word-break:break-all;line-height:1em}.site-item .link,.site-item .title{color:#202124;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;letter-spacing:.1px}.site-item .title{font-weight:400;font-size:14px;line-height:20px}.site-item .link{font-size:12px;line-height:16px}.site-item .header{display:flex}.site-item .favicon{flex-grow:0;flex-shrink:0;display:block;width:28px;height:28px;border-radius:50%;border:1px solid #ecedef;padding:4px;margin:4px 12px 4px 0;background-color:#f1f3f4}.site-item .favicon img{display:block;width:18px;height:18px}.site-item .subtitle{font-size:20px;font-weight:400;line-height:24px;color:#1558d6;margin:6px 0}.site-item .description{display:block;contain:layout paint;color:#4d5156;font-size:14px;line-height:20px;padding-top:1px;margin-bottom:-1px;display:-webkit-box;-webkit-box-orient:vertical;overflow:hidden;-webkit-line-clamp:3}.engines{background-color:#fff;padding:12px 16px 6px 16px}.engines>div{display:flex;flex-wrap:wrap}.engine-item{display:block;width:20%;color:#f1f1f1}.engine-item>div{height:42px;display:block;font-size:16px;line-height:42px;text-align:center}.engine-item input{width:0;height:0;display:block;margin:0;padding:0}.engine-item input:checked+div{font-weight:700;color:#fff;box-shadow:0 0 4px 2px rgba(255,255,255,.75) inset}.search-container{background-color:#fff;margin-bottom:8px;padding:12px 16px 6px 16px;display:none}.search-bar{display:flex;background-color:#fff;padding:4px 16px;border-radius:19px;box-shadow:0 2px 5px 0 rgba(60,64,67,.16)}#ss{margin:0;display:block;height:36px;flex-shrink:1;flex-grow:1;border:0;outline:0;padding:0;font-size:16px}.search-bar{position:relative}.search-bar svg{display:block;width:24px;height:24px;margin:6px 0 6px 6px;color:#9aa0a6;fill:currentColor}.search-preset{margin:6px 0}.search-preset span{margin-right:1em;color:#9aa0a6;user-select:none}#search_history{position:absolute;z-index:500;top:38px;left:4px;right:4px;background-color:#fff;display:none}#search_history.active{display:block}#search_history_clear,#search_history_list>div{display:block;padding:12px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}#search_history_clear:active,#search_history_list>div:active{background-color:#e2f7ff}#search_history_clear{text-align:center}.tabbar{background-color:#fff;display:flex;padding:6px 16px}.tabbar>div{font-size:16px;color:#9aa0a6;padding:6px 12px;border-bottom:2px solid transparent;user-select:none}.tabbar>div.active{color:#f60;border-bottom-color:#f60}.tabbarview>div{display:none}.tabbarview>div.active{display:block}";var t=[];window.getSearchEngineCallback=function(e){if(e){var t=document.querySelector('input[data-id="'.concat(e,'"]'));t&&(t.checked=!0)}},function(){if(window.DamnReadChannel)window.getSearchHistoryCallback=function(e){if(e)for(var a=JSON.parse(e),i=0;i<a.length;i++)t.push(a[i])},window.DamnReadChannel.postMessage(JSON.stringify({event:"getStorage",data:{key:"search_keywords",callback:"getSearchHistoryCallback"}}));else if(window.localStorage)for(var e=JSON.parse(window.localStorage.getItem("search_keywords")||"[]"),a=0;a<e.length;a++)t.push(e[a])}(),window.updateSearchEngine=function(e){var t=e.getAttribute("data-id");t&&(window.DamnReadChannel?window.DamnReadChannel.postMessage(JSON.stringify({event:"setStorage",data:{key:"search_engine",value:t}})):window.localStorage&&window.localStorage.setItem("search_engine",t))};var a=e("div");a.classList.add("search-container"),a.innerHTML='<div class="search-bar">\n<input id="ss" placeholder="'.concat("",'"><svg focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg>\n<div id="search_history"><div id="search_history_list"></div><div id="search_history_clear">清空</div></div>\n</div>\n<div class="search-preset"></div>');var i=document.getElementById("ss"),n=document.getElementById("search_history");if(window.getLastKeywordCallback=function(e){e&&(i.value=e)},window.DamnReadChannel)window.DamnReadChannel.postMessage(JSON.stringify({event:"getStorage",data:{key:"last_keyword",callback:"getLastKeywordCallback"}}));else if(window.localStorage){var o=window.localStorage.getItem("last_keyword");o&&(i.value=o)}function r(e){window.DamnReadChannel?window.DamnReadChannel.postMessage(JSON.stringify({event:"setStorage",data:{key:"last_keyword",value:e}})):window.localStorage&&window.localStorage.setItem("last_keyword",e)}function l(e){r(e);var t=document.querySelector(".engine-item input:checked").value;window.location.href="".concat(t).concat(encodeURIComponent(e))}function d(){var e=i.value.trim()||i.getAttribute("placeholder");/^https?:\/\//.test(e)?window.DamnReadChannel?window.DamnReadChannel.postMessage(JSON.stringify({event:"transcodeBrowse",data:{url:e}})):window.open(e):/\[damnread:[^\]]+]/.test(e)?window.DamnReadChannel&&window.DamnReadChannel.postMessage(JSON.stringify({event:"importSubjects",data:{value:/(\[damnread:[^\]]+])/.exec(e)[1]}})):(!function(e){e.length<48&&-1===t.indexOf(e)&&t.unshift(e),t.length>6&&t.splice(6,t.length-6),window.DamnReadChannel?window.DamnReadChannel.postMessage(JSON.stringify({event:"setStorage",data:{key:"search_keywords",value:JSON.stringify(t)}})):window.localStorage&&window.localStorage.setItem("search_keywords",JSON.stringify(t))}(e),l(e))}i.onkeyup=function(e){13===e.keyCode?d():8===e.keyCode&&0===i.value.length&&r("")},i.onfocus=function(e){if(i.select(),0!==t.length){n.classList.add("active");var a=document.getElementById("search_history_list");a.innerHTML="";for(var o=function(e){var i=t[e],n=document.createElement("div");n.innerText=i,n.onclick=function(e){e.preventDefault(),e.stopPropagation(),l(i)},a.appendChild(n)},r=0;r<t.length;r++)o(r)}},document.body.onclick=function(e){e.target!==i&&n.classList.contains("active")&&(n.classList.remove("active"),e.stopImmediatePropagation(),e.preventDefault())},document.getElementById("search_history_clear").onclick=function(){t.splice(0,t.length),window.DamnReadChannel?window.DamnReadChannel.postMessage(JSON.stringify({event:"setStorage",data:{key:"search_keywords",value:"[]"}})):window.localStorage&&window.localStorage.setItem("search_keywords","[]")},document.querySelector(".search-bar svg").onclick=d,window.applyPreset=function(e){i.value=e.innerText,i.focus()},document.querySelector(".search-preset").innerHTML=[].map((function(e){return'<span onclick="applyPreset(this)">'.concat(e,"</span>")})).join(""),window.toggleNight=function(e){e?document.body.classList.add("night"):document.body.classList.remove("night")},window.DamnReadChannel?window.DamnReadChannel.postMessage(JSON.stringify({event:"getStorage",data:{key:"search_engine",callback:"getSearchEngineCallback"}})):window.getSearchEngineCallback(window.localStorage.getItem("search_engine"));
