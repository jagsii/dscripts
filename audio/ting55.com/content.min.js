exports=async function(url,bid,cid,options){const{send}=require("http"),clientOptions={...(options&&options.clientOptions),encoding:"utf-8","x-mobile":1};stat("request");let response=await send(url,clientOptions);stat("request"),assertOK(response);let html=response.body;const{xt,b,cp,p}=html.subRegexMap(/<meta name="_c" content="(?<xt>[^"]+)"\/><meta name="_b" content="(?<b>[^"]+)"\/>[\S\s]*?<meta name="_cp" content="(?<cp>[^"]+)"[\S\s]+?<meta name="_p" content="(?<p>[^"]+)"\/>/);response=await send({url:"https://m.ting55.com/glink",method:"POST",body:`bookId=${b}&isPay=${p}&page=${cp}`,headers:{xt:xt,Referer:url,"Content-Type":"application/x-www-form-urlencoded"}},clientOptions),assertOK(response);const json=JSON.parse(response.body);return -1===json.status?{url:"",vip:!0}:{url:json.ourl||`${json.url}?v=${new Date().getTime()}`}};