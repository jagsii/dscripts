exports=async function(url,bid,cid,options){function GetDateTimeToString(){const a=new Date,b=a.getFullYear();let c=(a.getMonth()+1+"").padStart(2,"0");const d=(a.getDate()+"").padStart(2,"0"),e=(a.getHours()+"").padStart(2,"0"),f=(a.getMinutes()+"").padStart(2,"0"),g=(a.getSeconds()+"").padStart(2,"0");return b+""+c+""+d+""+e+""+f+""+g}const md5=require("crypto/md5"),hex=require("crypto/hex/encode"),absoluteUrl=require("utils/absolute_url"),clientOptions={...(options&&options.clientOptions),encoding:"gbk"},{send}=require("http");let response=await send({url:absoluteUrl(`/playdata/${bid.split("/")[1]}/${"1"===cid?"index":cid}.html`,url),method:"POST",headers:{referer:url,"x-requested-with":"XMLHttpRequest"}},clientOptions);assertOK(response);let html=response.body;const json=JSON.parse(html);let urlpath=json.urlpath;urlpath=urlpath.replace(/.flv/g,".mp3");let _urlpath=urlpath;const u=_urlpath.split("com")[1],d=function(){const d=GetDateTimeToString(),k=hex(md5("a8a23a5a400cfcac"+d));return {d,k}}(),g=function(u){var _Mathfloor=Math.floor;const t=_Mathfloor(new Date().getTime()/1e3),k=hex(md5(u+"-"+t+"-0-0-a8a23a5a400cfcac"));return {k,t}}(u),k=g.t+"-0-0-"+g.k;return urlpath=urlpath+"?time="+d.d+"&key="+d.k+"&auth_key="+k,{url:absoluteUrl(urlpath,url)}};